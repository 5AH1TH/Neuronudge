{% extends "layout.html" %}
{% block title %}Change Password{% endblock %}

{% block content %}
<h1>Change Your Password</h1>

<form method="POST" action="{{ url_for('views.change_password') }}" novalidate aria-describedby="password-instructions">
    {{ form.hidden_tag() }}

    <div id="password-instructions" class="form-help" style="margin-bottom: 1rem; color: #555; font-style: italic;">
        For security, please choose a strong password with at least 8 characters including uppercase, lowercase, numbers, and symbols.
    </div>

    <div class="form-group">
        <label for="{{ form.current_password.id }}">Current Password *</label><br>
        {{ form.current_password(id=form.current_password.id, type="password") }}
        {% if form.current_password.errors %}
            <ul class="errors" role="alert" aria-live="assertive">
                {% for err in form.current_password.errors %}
                    <li>{{ err }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="{{ form.new_password.id }}">New Password *</label><br>
        {{ form.new_password(id=form.new_password.id, type="password") }}
        {% if form.new_password.errors %}
            <ul class="errors" role="alert" aria-live="assertive">
                {% for err in form.new_password.errors %}
                    <li>{{ err }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="{{ form.confirm_new_password.id }}">Confirm New Password *</label><br>
        {{ form.confirm_new_password(id=form.confirm_new_password.id, type="password") }}
        {% if form.confirm_new_password.errors %}
            <ul class="errors" role="alert" aria-live="assertive">
                {% for err in form.confirm_new_password.errors %}
                    <li>{{ err }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <button type="submit" class="btn btn-primary" aria-label="Change Password">Update Password</button>
    <a href="{{ url_for('views.profile') }}" class="btn btn-secondary" role="button" style="margin-left:1rem;">Back to Profile</a>
</form>
{% endblock %}
